# CGI configuration
# This config demonstrates:
# - CGI execution for PHP and Python
# - Different methods handling for CGI

server {
    listen 8082;
    host 127.0.0.1;
    server_name cgi.local;
    root ./www;
    client_max_body_size 10000000; # 10MB limit

    # Error pages
    error_page 404 /errors/404.html;
    error_page 500 /errors/500.html;

    # Root location
    location / {
        index index.html;
        autoindex off;
        methods GET;
    }

    # PHP scripts handling
    location /scripts {
        root ./www/scripts;
        methods GET POST;
        cgi_ext .php;
    }

    # Python scripts handling
    location /python {
        root ./www/python_scripts;
        methods GET POST;
        cgi_ext .py;
    }

    # Multiple CGI extensions in one location
    location /cgi-bin {
        root ./www/cgi-bin;
        methods GET POST;
        cgi_ext .php .py .pl; # Support PHP, Python, and Perl
    }

    # Form submissions with CGI processing
    location /forms {
        root ./www/forms;
        methods GET POST;
        index form.html;
        cgi_ext .php;
    }
}