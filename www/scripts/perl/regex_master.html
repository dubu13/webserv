<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perl Regex Master</title>
    <link rel="stylesheet" href="/scripts/assets/css/script_styles.css">
</head>
<body>
    <div class="container">
        <div class="header perl">
            <h1>
                <svg class="language-logo" viewBox="0 0 25 25" width="48" height="48">
                    <path d="M12.5,7.5 C7,7.5 1.5,17.5 6,23 C9.5,27.5 21,25 20,15 C19.5,10 16.5,7.5 12.5,7.5" fill="#0073A1"></path>
                    <path d="M15,9 C13,9 12,10 12,12 C12,14 13,15 15,15 C17,15 18,14 18,12 C18,10 17,9 15,9" fill="#FFFFFF"></path>
                </svg>
                Perl Regex Master
            </h1>
            <p>Regular expression demonstration using Perl's powerful regex engine</p>
        </div>
        
        <div class="card">
            <h2>System Information</h2>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-label">Perl Version</div>
                    <div id="perl-version" class="info-value">Loading...</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Operating System</div>
                    <div id="os" class="info-value">Loading...</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Hostname</div>
                    <div id="hostname" class="info-value">Loading...</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Kernel</div>
                    <div id="kernel" class="info-value">Loading...</div>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2>Sample Text for Regex</h2>
            <div class="terminal">
                <pre id="sample-text">Loading sample text...</pre>
            </div>
            
            <h3>Analysis Results</h3>
            
            <h4>Emails Found:</h4>
            <div id="emails" class="extracted">Loading...</div>
            
            <h4>IP Addresses Found:</h4>
            <div id="ips" class="extracted">Loading...</div>
            
            <h4>Dates Found:</h4>
            <div id="dates" class="extracted">Loading...</div>
            
            <h4>Phone Numbers Found:</h4>
            <div id="phones" class="extracted">Loading...</div>
        </div>
        
        <div class="card">
            <h2>Text Transformation with Regular Expressions</h2>
            
            <div id="transforms" class="transforms">
                <div class="transform">
                    <div class="transform-title">Original Text</div>
                    <div class="terminal">
                        <pre id="original-text">Loading...</pre>
                    </div>
                </div>
                
                <div class="transform">
                    <div class="transform-title">Transformed Text (Anonymized)</div>
                    <div class="terminal">
                        <pre id="transformed-text">Loading...</pre>
                    </div>
                </div>
                
                <div class="transform">
                    <div class="transform-title">Highlighted Entities</div>
                    <div class="terminal">
                        <pre id="highlighted-text">Loading...</pre>
                    </div>
                </div>
            </div>
            
            <h3>The Power of Perl's Regex</h3>
            <div class="code-block">
# Extract emails with regex
my \@emails = \$sample_text =~ /\\b[A-Za-z0-9._%+-]+\@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}\\b/g;

# Transform emails with substitution
\$transformed_text =~ s/([A-Za-z0-9._%+-]+)\@([A-Za-z0-9.-]+\\.[A-Za-z]{2,})/\$1\\@[protected]/g;
            </div>
        </div>
        
        <div class="card">
            <h2>Common Regular Expression Patterns</h2>
            <p>Perl is renowned for its powerful regex capabilities, here are some common patterns:</p>
            
            <table id="patterns-table" class="pattern-table">
                <thead>
                    <tr>
                        <th>Pattern Name</th>
                        <th>Regular Expression</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- This will be filled by JavaScript -->
                </tbody>
            </table>
            
            <h3>Perl Regex Special Features</h3>
            <div class="code-block">
# Named capture groups
if (\$text =~ /(?&lt;year&gt;\\d{4})-(?&lt;month&gt;\\d{2})-(?&lt;day&gt;\\d{2})/) {
    print "Year: \$+{year}, Month: \$+{month}, Day: \$+{day}";
}

# Lookahead and lookbehind
\$text =~ s/(?&lt;=\\w)(?=\\d)/:/g;  # Insert colon between letter and digit

# Non-greedy matching
\$text =~ /&lt;.*?&gt;/;  # Match HTML tags non-greedily

# Regex modifiers
\$text =~ /pattern/gimsx;  # g:global, i:case-insensitive, m:multiline, s:dot-all, x:extended
            </div>
        </div>
        
        <div class="footer">
            <p>Generated by the WebServ CGI Handler - Running Perl v5.34.0</p>
            <p>An example of separating content (Perl), presentation (HTML/CSS), and behavior (JavaScript)</p>
        </div>
    </div>

    <script src="/scripts/assets/js/script_common.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Load data from Perl script
            fetch('/scripts/perl/regex_master.pl')
                .then(response => response.text())
                .then(html => {
                    // Create a temporary element to parse the HTML
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = html;
                    
                    // Extract system info
                    document.getElementById('perl-version').textContent = 'v5.34.0';
                    document.getElementById('os').textContent = tempDiv.querySelector('#os') ? 
                        tempDiv.querySelector('#os').textContent : 'Linux';
                    document.getElementById('hostname').textContent = tempDiv.querySelector('#hostname') ?
                        tempDiv.querySelector('#hostname').textContent : 'webserv';
                    document.getElementById('kernel').textContent = tempDiv.querySelector('#kernel') ?
                        tempDiv.querySelector('#kernel').textContent : '5.15.0';
                    
                    // Extract sample text
                    document.getElementById('sample-text').textContent = tempDiv.querySelector('#sample-text') ?
                        tempDiv.querySelector('#sample-text').textContent : 'Sample text not available';
                    
                    // Extract emails
                    const emailsContainer = document.getElementById('emails');
                    const emails = tempDiv.querySelectorAll('.email');
                    emailsContainer.innerHTML = '';
                    emails.forEach(email => {
                        const span = document.createElement('span');
                        span.className = 'extracted-item';
                        span.textContent = email.textContent;
                        emailsContainer.appendChild(span);
                    });
                    
                    // Extract IPs
                    const ipsContainer = document.getElementById('ips');
                    const ips = tempDiv.querySelectorAll('.ip');
                    ipsContainer.innerHTML = '';
                    ips.forEach(ip => {
                        const span = document.createElement('span');
                        span.className = 'extracted-item';
                        span.textContent = ip.textContent;
                        ipsContainer.appendChild(span);
                    });
                    
                    // Extract dates
                    const datesContainer = document.getElementById('dates');
                    const dates = tempDiv.querySelectorAll('.date');
                    datesContainer.innerHTML = '';
                    dates.forEach(date => {
                        const span = document.createElement('span');
                        span.className = 'extracted-item';
                        span.textContent = date.textContent;
                        datesContainer.appendChild(span);
                    });
                    
                    // Extract phones
                    const phonesContainer = document.getElementById('phones');
                    const phones = tempDiv.querySelectorAll('.phone');
                    phonesContainer.innerHTML = '';
                    phones.forEach(phone => {
                        const span = document.createElement('span');
                        span.className = 'extracted-item';
                        span.textContent = phone.textContent;
                        phonesContainer.appendChild(span);
                    });
                    
                    // Extract original and transformed text
                    document.getElementById('original-text').textContent = tempDiv.querySelector('#original-text') ?
                        tempDiv.querySelector('#original-text').textContent : 'Original text not available';
                    document.getElementById('transformed-text').textContent = tempDiv.querySelector('#transformed-text') ?
                        tempDiv.querySelector('#transformed-text').textContent : 'Transformed text not available';
                    document.getElementById('highlighted-text').textContent = tempDiv.querySelector('#highlighted-text') ?
                        tempDiv.querySelector('#highlighted-text').textContent : 'Highlighted text not available';
                    
                    // Extract patterns table
                    const patternsTable = document.getElementById('patterns-table').querySelector('tbody');
                    const patterns = tempDiv.querySelectorAll('.pattern');
                    patternsTable.innerHTML = '';
                    patterns.forEach(pattern => {
                        const row = document.createElement('tr');
                        const nameCell = document.createElement('td');
                        nameCell.className = 'pattern-name';
                        nameCell.textContent = pattern.querySelector('.pattern-name').textContent;
                        
                        const codeCell = document.createElement('td');
                        codeCell.className = 'pattern-code';
                        codeCell.textContent = pattern.querySelector('.pattern-code').textContent;
                        
                        row.appendChild(nameCell);
                        row.appendChild(codeCell);
                        patternsTable.appendChild(row);
                    });
                })
                .catch(error => {
                    console.error('Error loading Perl script:', error);
                });
        });
    </script>
</body>
</html>