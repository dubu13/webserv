<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruby Text Processing</title>
    <link rel="stylesheet" href="/scripts/assets/css/script_styles.css">
</head>
<body>
    <div class="container">
        <div class="header ruby">
            <h1>
                <svg class="language-logo" viewBox="0 0 512 512" width="48" height="48">
                    <path fill="#CC342D" d="M331.8 224.1c0 53.3-43.2 96.5-96.5 96.5s-96.5-43.2-96.5-96.5c0-53.3 43.2-96.5 96.5-96.5s96.5 43.2 96.5 96.5z"/>
                    <path fill="#CC342D" d="M256 50c-99.8 0-180.7 80.8-180.7 180.7 0 89.9 73 163.3 163.3 163.3 89.9 0 163.3-73 163.3-163.3C402 130.8 355.8 50 256 50zm-12.9 302.6c-73 0-132.1-59.1-132.1-132.1S169.5 88.4 243.1 88.4c39.8 0 93.3 31.5 111.3 78.9l-59.5 34.9c-12.9-27.9-38.6-47.4-65.2-47.4-41.5 0-75 33.5-75 75s33.5 75 75 75c29.7 0 55.3-17.4 67.3-42.5l57.4 32.5c-22.4 37.9-63.9 63.3-111.3 63.3z"/>
                </svg>
                Ruby Text Processing
            </h1>
            <p>Demonstrating Ruby's text processing capabilities</p>
        </div>

        <div class="card">
            <h2>System Information</h2>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-label">Ruby Version</div>
                    <div id="ruby-version" class="info-value">Loading...</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Platform</div>
                    <div id="platform" class="info-value">Loading...</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Hostname</div>
                    <div id="hostname" class="info-value">Loading...</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Current Time</div>
                    <div id="current-time" class="info-value">Loading...</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Text Analysis</h2>
            <h3>Sample Text</h3>
            <div class="terminal">
                <pre id="sample-text">Loading...</pre>
            </div>

            <h3>Statistics</h3>
            <table id="stats-table">
                <tr>
                    <th>Metric</th>
                    <th>Value</th>
                </tr>
                <tr>
                    <td>Word Count</td>
                    <td id="word-count">Loading...</td>
                </tr>
                <tr>
                    <td>Character Count</td>
                    <td id="char-count">Loading...</td>
                </tr>
                <tr>
                    <td>Line Count</td>
                    <td id="line-count">Loading...</td>
                </tr>
            </table>
        </div>

        <div class="card">
            <h2>Text Transformations</h2>
            <h3>Syntax Highlighted</h3>
            <div id="highlighted-text" class="code-block">Loading...</div>

            <h3>Word Reversal</h3>
            <div id="reversed-text" class="code-block">Loading...</div>
        </div>

        <div class="card">
            <h2>Ruby Demo Features</h2>
            <div id="demo-container"></div>
        </div>

        <div class="footer">
            <p>Generated by the WebServ CGI Handler - Running Ruby</p>
            <p>Demonstrating Ruby's powerful text processing capabilities</p>
        </div>
    </div>

    <script src="/scripts/assets/js/script_common.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Load data from Ruby script
            fetch('/scripts/ruby/text_processor.rb')
                .then(response => response.text())
                .then(html => {
                    // Create a temporary element to parse the HTML
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = html;
                    
                    // Extract system info
                    document.getElementById('ruby-version').textContent = tempDiv.querySelector('.ruby-version') ? 
                        tempDiv.querySelector('.ruby-version').textContent : 'Ruby 3.0.0';
                    document.getElementById('platform').textContent = tempDiv.querySelector('.platform') ?
                        tempDiv.querySelector('.platform').textContent : 'linux';
                    document.getElementById('hostname').textContent = tempDiv.querySelector('.hostname') ?
                        tempDiv.querySelector('.hostname').textContent : 'webserv';
                    document.getElementById('current-time').textContent = tempDiv.querySelector('.current-time') ?
                        tempDiv.querySelector('.current-time').textContent : new Date().toLocaleString();

                    // Extract text analysis data
                    document.getElementById('sample-text').textContent = tempDiv.querySelector('.sample-text') ?
                        tempDiv.querySelector('.sample-text').textContent : 'Sample text not available';
                    document.getElementById('word-count').textContent = tempDiv.querySelector('.word-count') ?
                        tempDiv.querySelector('.word-count').textContent : '0';
                    document.getElementById('char-count').textContent = tempDiv.querySelector('.char-count') ?
                        tempDiv.querySelector('.char-count').textContent : '0';
                    document.getElementById('line-count').textContent = tempDiv.querySelector('.line-count') ?
                        tempDiv.querySelector('.line-count').textContent : '0';

                    // Extract transformations
                    document.getElementById('highlighted-text').innerHTML = tempDiv.querySelector('.highlighted-text') ?
                        tempDiv.querySelector('.highlighted-text').innerHTML : 'No highlighted text available';
                    document.getElementById('reversed-text').textContent = tempDiv.querySelector('.reversed-text') ?
                        tempDiv.querySelector('.reversed-text').textContent : 'No reversed text available';

                    // Extract demo features
                    const demoContainer = document.getElementById('demo-container');
                    const demos = tempDiv.querySelectorAll('.demo-item');
                    if (demos.length > 0) {
                        demos.forEach(demo => {
                            demoContainer.appendChild(demo.cloneNode(true));
                        });
                    } else {
                        demoContainer.textContent = 'No demo features available';
                    }
                })
                .catch(error => {
                    console.error('Error loading Ruby script:', error);
                });
        });
    </script>
</body>
</html>